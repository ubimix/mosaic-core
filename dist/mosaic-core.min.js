/* 
 * mosaic-core v0.0.3 | License: MIT 
 */
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("mosaic-commons"),require("underscore"),require("mosaic-teleport"),require("leaflet"),require("react")):"function"==typeof define&&define.amd?define(["mosaic-commons","underscore","mosaic-teleport","leaflet","react"],b):"object"==typeof exports?exports["mosaic-core"]=b(require("mosaic-commons"),require("underscore"),require("mosaic-teleport"),require("leaflet"),require("react")):a["mosaic-core"]=b(a["mosaic-commons"],a.underscore,a["mosaic-teleport"],a.leaflet,a.react)}(this,function(a,b,c,d,e){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){var d,e;d=[c,c(1),c(2),c(3),c(4),c(5),c(6),c(7),c(8),c(9),c(10),c(11),c(12),c(13),c(14),c(15),c(16),c(17),c(18),c(19),c(20)],e=function(){var a=c(1);return a.App=c(2),a.App.Actions=c(3),a.App.Api=c(4),a.App.Component=c(5),a.App.Store=c(6),a.Leaflet={ReactMap:c(12),FeatureBuilder:c(14)},a.Core={DataSet:c(8),TreeNode:c(19),AbstractSet:c(7),AdapterManager:c(15),CompositeDataSet:c(9),DataSetView:c(10),Dependencies:c(16),Intents:c(17),LeafletDataSetView:c(11),LeafletDataSubsetView:c(13),LeafletFeatureBuilder:c(14),ReactDataSetMixin:c(20),ViewManager:c(18)},a.Core}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(b){b.exports=a},function(a,b,c){var d,e;d=[c,c(1),c(17)],e=function(){var a=c(1),b=c(17);return a.Class.extend(a.Events.prototype,{initialize:function(a){this.setOptions(a),this.intents=new b,this.initModules()},start:function(){var b=this;return a.P.then(function(){return b.preloadData()}).then(function(){return b.initViews()},function(a){return b.initViews(a)})},stop:function(){var b=this;return a.P.then(function(){return b.deleteViews()}).then(function(){return b.deleteModules()})},preloadData:function(){},initModules:function(){},deleteModules:function(){},initViews:function(){},deleteViews:function(){}})}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(5)],e=function(){var a=(c(21),c(5));return a.extend({})}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1),c(22),c(5)],e=function(){function a(a){return a?b.isArray(a)?a:b.isArray(a.features)?a.features:a:a}var b=c(21),d=c(5),e=c(1);return d.extend({initialize:function(){d.prototype.initialize.apply(this,arguments),this._cache={}},_getGeoJsonArray:function(b){return this._getJson(b).then(a)},_getJson:function(a){var b=this;return e.P.then(function(){var c,d=a.path,e=a.noCache,f=a.force;return e||f||(c=b._cache[d]),c?c:b._loadJson(d).then(function(a){return e||(b._cache[d]=a),a})})},_loadJson:function(a){var b=this;return e.P.then(function(){var c=b.app.options.baseUrl,d=e.Teleport.HttpClient.newInstance({baseUrl:c});return d.exec({path:a,method:"GET"})})}})}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(1)],e=function(){var a=c(1);return a.Class.extend(a.Events.prototype,{initialize:function(a){this.setOptions(a),this.app=this.options.app}})}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(5)],e=function(){var a=c(21),b=c(5);return b.extend({setOptions:function(){b.prototype.setOptions.apply(this,arguments),this.options.app&&(this.app=this.options.app)},_addActions:function(b){var c=this;c.actions||(c.actions={}),a.each(b,function(a){c.actions[a]=function(b){return c.app.intents.newIntent(a,b).promise}})},initialize:function(a){this.setOptions(a),this._initFields()},notify:function(){this.emit("changed")},addChangeListener:function(a,b){this.on("changed",a,b)},removeChangeListener:function(a,b){this.off("changed",a,b)},_initFields:function(){}})}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1)],e=function(){var a=c(1),b=c(21),d=a.Class.extend(a.Events.prototype,a.Events,{initialize:function(a){b.extend(this,a)}}),e=a.Class.extend(a.Events.prototype,a.Events,{initialize:function(a){this.setOptions(a),b.isFunction(this.options.getKey)&&(this.getKey=this.options.getKey),this._index={}},_setObjects:function(a){var c=this,d=b.toArray(a),e={},f={enter:{},update:{},exit:{}};return b.each(d,function(a,d){var g,h=c.getKey(a);b.has(c._index,h)?(g=c._onUpdate(c._index[h])||g,delete c._index[h],f.update[g.key]=g):(g=c._newSetEntry({key:h,obj:a,idx:d}),g=c._onEnter(g)||g,f.enter[g.key]=g),e[h]=g}),b.each(c._index,function(a){f.exit[a.key]=c._onExit(a)||a}),c._index=e,f},_newSetEntry:function(a){return new d(a)},_getIndexEntries:function(a){return a?b.isArray(a)?b.map(a,function(a){return this._index[a]},this):this._index[a]:b.values(this._index)},_getIndexEntry:function(a){return this._index[a]},getKey:function(a){return a},getKeys:function(){return b.keys(this._index)},_onEnter:function(a){return a.emit("enter"),a},_onExit:function(a){return a.emit("exit"),a},_onUpdate:function(a){return a.emit("update"),a},getIndex:function(a){var b=a?this._index[a]:null;return b?b.idx:-1},hasKey:function(a){return b.has(this._index,a)}});return e.SetEntry=d,e}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(7),c(1)],e=function(){var a=(c(1),c(7)),b=c(21),d=a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this._open=!1},open:function(){return this._open?!1:(this.triggerMethod("open"),this.options.data&&this.setData(this.options.data),this._open=!0,!0)},close:function(){return this._open?(this.setData([]),this.triggerMethod("close"),this._open=!1,!0):!1},setData:function(a){this.triggerMethod("update:begin");var b=this._setObjects(a);return this.triggerMethod("update",b),this.triggerMethod("update:end"),this},getData:function(a){if(a){var c=this._index[a];return c?c.obj:null}return b.map(this._index,function(a){return a.obj})},getDataEntries:function(a){if(a){var c=this._index[a];return c}return b.values(this._index)},getDataIndex:function(a){var b=this.getKey(a);return this.getIndex(b)}});return d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(8)],e=function(){var a=c(21),b=c(8),d=b.extend({initialize:function(){b.prototype.initialize.apply(this,arguments),this._filterDataSets=a.bind(this._filterDataSets,this),this.setFilter(this.options.filterData||this.options.filter),this.open()},open:function(){return b.prototype.open.apply(this,arguments)?(a.each(this.options.dataSets,function(a){a.on("update",this._filterDataSets)},this),this._filterDataSets(),!0):!1},close:function(){return b.prototype.close.apply(this,arguments)?(a.each(this.options.dataSets,function(a){a.off("update",this._filterDataSets)},this),b.prototype.setData.call(this,[]),!0):!1},setFilter:function(a){return this._filter=a,this._filterDataSets(),this},_filterDataSets:function(){var c={},d=this.options.dataSets;a.each(d,function(b){a.each(b.getKeys(),function(a){c[a]=!0})},this);var e=[];a.each(a.keys(c),function(b){var c=a.map(d,function(a){var c=a.getDataEntries(b);return c}),f=this._filterData(b,c);f&&e.push(f)},this),b.prototype.setData.call(this,e)},_filterData:function(b,c){if(this._filter)return this._filter(b,c);var d=[{}].concat(c);return a.extend.call(null,d)},setData:function(){throw new Error("This method should not be called directly. This dataset is a combination of parent datasets.")}});return d.OR=d.extend({_filterData:function(b,c){var d=a.find(c,function(a){return!!a});return d}}),d.AND=d.extend({_filterData:function(b,c){var d=null;return a.find(c,function(a){return d=a,!a})?null:d}}),d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1),c(7)],e=function(){var a=(c(1),c(21)),b=c(7),d=b.extend({initialize:function(){if(b.prototype.initialize.apply(this,arguments),this._onDataSetUpdate=a.bind(this._onDataSetUpdate,this),!this.options.dataSet)throw new Error("Data set is not defined.")},getKey:function(a){return this.getDataSet().getKey(a)},open:function(){if(this._open)return!1;var a=this.getDataSet();return a.on("update:end",this._onDataSetUpdate),this._setData(a.getData()),this._open=!0,!0},close:function(){if(!this._open)return!1;var a=this.getDataSet();return this._setData([]),a.off("update:end",this._onDataSetUpdate),this._open=!1,!0},getDataSet:function(){return this.options.dataSet},_setData:function(a){var b=this;return b.triggerMethod("update:begin"),b._setObjects(a),b.triggerMethod("update:end"),this},_onDataSetUpdate:function(){var a=this.getDataSet(),b=a.getData();this._setData(b)}});return d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(23),c(10)],e=function(){var a=c(23),b=c(10),d=b.extend({initialize:function(){b.prototype.initialize.apply(this,arguments),this._onZoomEnd=_.bind(this._onZoomEnd,this)},onAdd:function(b){this._map=b,this._map.on("zoomend",this._onZoomEnd),this._layer=new a.featureGroup,this._map.addLayer(this._layer),this.open(),this._onZoomEnd()},onRemove:function(){this.close(),this._map.removeLayer(this._layer),this._map.off("zoomend",this._onZoomEnd),delete this._map,delete this._layer},_onEnter:function(a){return a.layer=this._newLeafletLayer(a),a.layer&&this._layer.addLayer(a.layer),a.emit("enter"),a},_onExit:function(a){return a.layer&&this._layer.removeLayer(a.layer),a.emit("exit"),a},_newLeafletLayer:function(){},_onZoomEnd:function(){var a=this,b=a._map.getZoom();_.each(a._index,function(a){a.emit("zoomend",{entry:a,zoom:b})})}});return d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(24),c(23)],e=function(){"use strict";var a=c(21),b=c(24),d=c(23);return b.createClass({displayName:"ReactMap",render:function(){return b.DOM.div({ref:"container",id:this.props.id,className:this.props.className})},componentDidMount:function(){var a=this.refs.container.getDOMNode();this.map=this._newMap(a),this.props.onMapAdd&&this.props.onMapAdd(this.map)},componentWillUnmount:function(){this.props.onMapRemove&&this.props.onMapRemove(this.map),this.map.remove(),delete this.map},_newMap:function(b){var c=this.props.options||{},e=d.map(b,{zoomControl:!1}),f=a.extend({},c.zoomControl);f=a.defaults(f,{position:"topright"});var g=d.control.zoom(f);e.addControl(g);var h=c.center;a.isArray(h)&&(h=d.latLng(h[1],h[0]));var i=c.zoom;return h&&void 0!==i&&e.setView(h,i),e}})}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(10)],e=function(){var a=c(10),b=a.extend({_onEnter:function(a){var b=this.options.parent;if(b){var c=b._getIndexEntry(a.key);_.extend(a,c)}return a.emit("enter"),a},onAdd:function(){this.open()},onRemove:function(){this.close()}});return b}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(1),c(23)],e=function(){var a=c(23),b=c(1),d=b.Class.extend({initialize:function(a,b){this.data=a,_.extend(this,b);var c=["onClick","onMouseOver","onMouseOut","onDblClick","onMouseMove"];this._handlers={},_.each(c,function(a){var b=a.toLowerCase().substring(2);this[a]=function(a){return void 0!==a?(this._handlers[b]=a,this):this._handlers[b]}},this)},setOptions:function(a){return this.opt=a,this},getOptions:function(){var a=_.toArray(arguments);return this._getOrInvoke(this.opt,a)||{}},setMarker:function(a){return this._marker=a,this},getMarker:function(){var a=_.toArray(arguments);return this._getOrInvoke(this._marker,a)},build:function(){var b=this,c=b.data,d=c.geometry;if(b._isEmptyGeometry(d))return!1;var e=b.getOptions(c),f=a.GeoJSON.geometryToLayer(c,function(c,d){var f=b.getMarker(d,e);return f||(f=new a.Marker(d,e)),f},a.GeoJSON.coordsToLatLng,e);return _.each(b._handlers,function(a,b){f.on(b,function(b){a(c,b)})}),f},_getOrInvoke:function(a,b){return _.isFunction(a)?a.apply(a,b):a},_isEmptyGeometry:function(a){return a&&a.coordinates&&a.coordinates.length&&("Point"!=a.type||a.coordinates[0]&&a.coordinates[1])?!1:!0}}),e=function(a,b){return new d(a,b)};return e}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1)],e=function(){"use strict";var a=c(21),b=c(1),d=b.Class,e=d.extend({TYPE_KEY_DELIM:"/",initialize:function(){this._adapters={},this._cache={}},_getKey:function(a,b){var c=this.getTypeKey(a),d=this.getTypeKey(b);return c+"::"+d},registerAdapter:function(a,b,c){var d=this._getKey(a,b);this._adapters[d]=c,this._cache={}},getAdapter:function(b,c){var d=this,e=d._getKey(b,c),f=d._cache[e];return f||a.has(d._cache,e)||(a.find(d._expandId(b),function(b){return a.find(d._expandId(c),function(a){var c=d._getKey(b,a);return f=d._adapters[c],!!f}),!!f}),d._cache[e]=f),f},newAdapterInstance:function(b,c,d){var e=this.getAdapter(b,c),f=null;return a.isFunction(e)?(d=d||{},this._checkValidity(e,d)&&(a.isFunction(e.initialize)&&e.initialize(d),f=new e(d),this._checkValidity(f,d)||(f=null))):f=e,f},removeAdapter:function(a,b){var c=this._getKey(a,b),d=this._adapters[c];return delete this._adapters[c],delete this._cache[c],d},_checkValidity:function(b,c){if(!a.isFunction(b.isValid))return!0;var d=b.isValid(c);return d},_expandId:function(b){if(!b)return[];for(var c=[],d=!1;a.isFunction(b.getParent)&&(d=!0,b=b.getParent());)c.push(b);if(!d&&a.isString(b)){b=this._normalizeTypeKey(b);for(var e=this.TYPE_KEY_DELIM,f=b.split(e);f.length;){var g=f.join(e);c.push(g),f.pop()}c.push("")}return c},getTypeKey:function(b){var c;if(b)if(a.isString(b))c=b;else{var d=null;a.isFunction(b)?d=b:a.isFunction(b.getClass)&&(d=b.getClass());var e;e=a.isFunction(d)?d.prototype:b.prototype,c=e.__type,c||(c=b.type=b.type||a.uniqueId("type-"))}return this._normalizeTypeKey(c)},_normalizeTypeKey:function(b){if(!a.isString(b))return b;if(""===b)return"";var c=this.TYPE_KEY_DELIM;return 0===b.indexOf(c)&&(b=c.substring(c.length)),b.lastIndexOf(c)==b.length-c.length&&(b=b.substring(0,b.length-c.length)),b}});return e}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1),c(7)],e=function(){var a=c(1),b=c(21),d=a.Class.extend({setDependencies:function(a){b.each(a,function(a,b){this.setDependency(b,a)},this)},setDependency:function(b,c){var d=this;if(!d._checkDependencies(b,c))throw a.Errors.newError("Circular dependencies").code(400);d._setDependencies(b,c)},visit:function(a,c){c.begin&&c.begin(a);var d=this.getDependencies(a);b.each(d,function(a){this.visit(a,c)},this),c.end&&c.end(a)},callDependencies:function(c,d){var e=this;return a.P.then(function(){if(b.isArray(c)){var f={};return a.P.all(b.map(c,function(a){return e._callDependencies(f,a,d)}))}return e._callDependencies({},c,d)})},getDependencies:function(a){return this._getDependencies(a)},getAllDependencies:function(a){var b=[];return this.visit(a,{end:function(c){c!==a&&b.push(c)}}),b},_callDependencies:function(c,d,e){function f(d){return c[d]||(c[d]=a.P.then(function(){return e.begin?e.begin(d):void 0}).then(function(){var c=g.getDependencies(d);if(c&&c.length)return a.P.all(b.map(c,f))}).then(function(a){return e.end?e.end(d,null,a):a},function(a){if(e.end)return e.end(d,a,null);throw a})),c[d]}var g=this;return f(d)},_checkDependencies:function(a,c){var e=this,f=b.isArray(c)?c:[c];return d.check(a,function(b){return b===a?f:e.getDependencies(b)})},_getDependencies:function(a){return this._dependencies?this._dependencies[a]||[]:[]},_setDependencies:function(a,b){this._dependencies||(this._dependencies=[]),this._dependencies[a]=b}});return d.check=function(a,c){function d(a){if(e[a])return!0;try{return e[a]=!0,!!b.find(c(a),d)}finally{delete e[a]}}var e={};return!d(a)},d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1),c(16)],e=function(){var a=c(1),b=c(21),d=c(16),e=a.Class.extend({newIntent:function(a,c){var d=new e.Intent(a,c);try{var f=this._intentHandlers?this._intentHandlers[a]:null;b.each(f,function(a,b){d._handleComponent(b,a)})}finally{d._finalize()}return d},addIntentHandlers:function(a,c){var d=b.toArray(arguments);c=d.pop(),a=this._checkComponentKey(d.pop()),b.each(c,function(b,c){this.addIntentHandler(a,c,b)},this)},addIntentHandler:function(a,c,d){var e=b.toArray(arguments);d=e.pop(),c=e.pop(),a=this._checkComponentKey(e.pop()),this._intentHandlers||(this._intentHandlers={});var f=this._intentHandlers[c]=this._intentHandlers[c]||{};f[a]=d},removeIntentHandlers:function(a,c){c||(c=a,a=null),b.each(c,function(b,c){this.removeIntentHandler(a,c,b)},this)},removeIntentHandler:function(a,c,d){if(this._intentHandlers){d||(e=c,c=a,a=null);var e=this._intentHandlers[c],f=[];a?b.each(e,function(a,b){d===a&&f.push(b)}):f.push(a),b.each(f,function(a){delete e[a]})}},_checkComponentKey:function(a){return a||b.uniqueId("$$cmp-")}});return e.Intent=a.Class.extend({initialize:function(b,c){this._deferred=a.P.defer(),this._processed=a.P.defer(),this.intentKey=b,this.params=c,this.promise=this._deferred.promise,this.processed=this._processed.promise,this._handlerPromises={},this._dependencies=new d,this._handled=!1},resolve:function(a){return this._handled=!0,this._deferred.resolve(a),this._deferred.promise},reject:function(a){return this._handled=!0,this._deferred.reject(a),this._deferred.promise},then:function(a,b){return this._deferred.promise.then(a,b)},waitFor:function(c){if(!this._componentKey)throw new Error("Component handler is not defined. This method could be called only from an intent handler.");var d=this;return b.each(c,function(a){d._dependencies.setDependency(a)}),d._deferred.promise.then(function(e){return a.P.all(b.map(c,function(b){var c=d._handlerPromises[b];return c||(c=a.P()),c})).then(function(){return e})})},_handleComponent:function(b,c){var d,e=this;try{e._componentKey=b,d=a.P.resolve(c(e))}catch(f){d=a.P.reject(f)}finally{this._handlerPromises[b]=d,delete e._componentKey}},_finalize:function(){var a=this;a._handled||a.reject(new Error("An intent was not handled."));var c=function(){var c=b.keys(a._handlerPromises);return a._dependencies.callDependencies(c,{end:function(b,c){if(c)throw c;return a._handlerPromises[b]}}).then(a._processed.resolve,a._processed.reject)};return a._deferred.promise.then(c,c).done()}}),e}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1),c(15)],e=function(){"use strict";var a=(c(21),c(1)),b=c(15),d=a.Class.extend({initialize:function(a){this.setOptions(a),this._adapterManager=this.options.adapterManager||new b,this.options.getResourceType&&(this.getResourceType=this.options.getResourceType)},registerView:function(a,b,c){this._adapterManager.registerAdapter(a,b,c)},newView:function(a,b,c){return this._adapterManager.newAdapterInstance(a,b,c)},getResourceType:function(a){return a.type||""}});return d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21),c(1)],e=function(){var a=c(1),b=c(21),d=a.Class.extend(a.Events.prototype,a.Events,{initialize:function(a){this.setOptions(a),this._children={}},getParent:function(){return this.parent},getKey:function(){return this.options.key},add:function(a,b){var c=this;c.remove(a),b.parent=this,c._children[a]=b,b._notify("add",{})},get:function(a,b){var c=this,d=c._children[a];return!d&&b&&(d=c._newChild(a),c.add(a,d)),d},getAll:function(){var a=this,c=b.toArray(arguments),d=[];return a._forEach(c,function(a){d.push(a)}),d},getAllKeys:function(){var a=this;return b.keys(a._children)},isParentOf:function(a,b){for(var c=b!==!1?a:a.getParent(),d=!1;c&&!(d=c===this);)c=c.getParent();return d},find:function(a){var b,c=this,d=c.getKey();return a==d?b=c:c._forEach([],function(c){return b=c.find(a),!b}),b},remove:function(a){var b=this,c=b._children[a];return c&&(c._notify("remove",{}),delete b._children[a]),c},visit:function(a){var c=this,d=!0;b.isFunction(a.before)&&(d=a.before(c)!==!1),d&&b.each(c._children,function(b){b.visit(a)}),b.isFunction(a.after)&&a.after(c)},_forEach:function(a,c){function d(a){var b=!1;if(a){var d=c.call(f,a,e);b=d===!1}return e++,b}var e=0,f=this;b.isFunction(a)&&(c=a,a=[]),a&&a.length?b.find(a,function(a){var b=f._children[a];return d(b)}):b.find(f._children,d)},_notify:function(a,b){var c=this;for(b.node=c;c&&(c.triggerMethod(a,b),!b.stopPropagation);)c=c.getParent()},_newChild:function(a){var b=this.getClass();return new b({key:a})}});return d.TreeNodeStatusMixin={_status:"inactive",getStatus:function(){return this._status||""},setStatus:function(a,c){var d=this._status,e=d!=a;(e||c&&c.force)&&(this._status=a,this._notify("status",b.extend({},c,{prevStatus:d})))},isActive:function(){return"active"==this._status},activate:function(a){this.setStatus("active",a)},deactivate:function(a){this.setStatus("inactive",a)},getStats:function(){var a=this,b={all:[]};return a._forEach([],function(a){var c=a.getKey();b.all.push(c);var d=a.getStatus(),e=b[d]=b[d]||[];e.push(c)}),b},onStatus:function(){function a(){return{internal:!0}}function b(b,c){"before"==c?b.activate(a()):"after"==c&&b.deactivate(a())}function c(b,c){"before"==c?b.deactivate(a()):"after"==c&&b.activate(a())}function d(b,c){("before"==c||"after"==c)&&b.deactivate(a())}function e(a,e){var f;if("activateBefore"==a.options.mode?f=b:"activateAfter"==a.options.mode?f=c:("exclusive"==a.options.mode||a.options.exclusive!==!1)&&(f=d),f){var g="before",h=function(a){"before"==g&&a.isParentOf(e.node,!0)&&(g="in"),f(a,g),"in"==g&&(g="after")};a._forEach([],h)}}return function(b){var c=this;b.node!=c?b.node.isActive()&&!b.internal&&(e(c,b),c.activate()):!c.isActive()&&c.options.deactivateAll&&c.visit({after:function(b){b.deactivate(a())}})}}()},d}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c,c(21)],e=function(){var a=c(21);return{getDataSet:function(){return this.props.dataSet},componentWillMount:function(){var a=this.getDataSet();a.on("update:end",this._onUpdate)},componentWillUnmount:function(){var a=this.getDataSet();a.off("update:end",this._onUpdate)},_onUpdate:function(){var a=this;a.setState(a._newState())},getInitialState:function(){return this._newState()},_newState:function(){return{}},renderChildren:function(){var b=this.getDataSet(),c=a.map(b._getIndexEntries(),function(a){return this.renderChild(a)},this);return c}}}.apply(null,d),!(void 0!==e&&(a.exports=e))},function(a){a.exports=b},function(a){a.exports=c},function(a){a.exports=d},function(a){a.exports=e}])});